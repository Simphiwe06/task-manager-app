import {
  require_react
} from "./chunk-K3XTCCNO.js";
import {
  __toESM
} from "./chunk-GFT2G5UO.js";

// node_modules/@refinedev/devtools-shared/dist/index.mjs
var import_react = __toESM(require_react(), 1);
var v = ((t) => (t.RELOAD = "devtools:reload", t.DEVTOOLS_INIT = "devtools:init", t.DEVTOOLS_HANDSHAKE = "devtools:handshake", t.DEVTOOLS_ALREADY_CONNECTED = "devtools:already-connected", t.ACTIVITY = "devtools:send-activity", t.DEVTOOLS_ACTIVITY_UPDATE = "devtools:activity-update", t.DEVTOOLS_CONNECTED_APP = "devtools:connected-app", t.DEVTOOLS_DISCONNECTED_APP = "devtools:disconnected-app", t.DEVTOOLS_HIGHLIGHT_IN_MONITOR = "devtools:highlight-in-monitor", t.DEVTOOLS_HIGHLIGHT_IN_MONITOR_ACTION = "devtools:highlight-in-monitor-action", t.DEVTOOLS_LOGIN_SUCCESS = "devtools:login-success", t.DEVTOOLS_RELOAD_AFTER_LOGIN = "devtools:reload-after-login", t.DEVTOOLS_INVALIDATE_QUERY = "devtools:invalidate-query", t.DEVTOOLS_INVALIDATE_QUERY_ACTION = "devtools:invalidate-query-action", t))(v || {});
var O = { useCan: "access-control", useLog: "audit-log", useLogList: "audit-log", useCreate: "data", useCreateMany: "data", useCustom: "data", useCustomMutation: "data", useDelete: "data", useDeleteMany: "data", useInfiniteList: "data", useList: "data", useMany: "data", useOne: "data", useUpdate: "data", useUpdateMany: "data", useForgotPassword: "auth", useGetIdentity: "auth", useIsAuthenticated: "auth", useLogin: "auth", useLogout: "auth", useOnError: "auth", usePermissions: "auth", useRegister: "auth", useUpdatePassword: "auth" };
var _ = Object.entries(O).reduce((e, [a, o]) => (e[o] || (e[o] = []), e[o].push(a), e), {});
async function d(e, a, o) {
  if (e.readyState !== e.OPEN) {
    await new Promise((s) => {
      let n = () => {
        e.send(JSON.stringify({ event: a, payload: o })), s(), e.removeEventListener("open", n);
      };
      e.addEventListener("open", n);
    });
    return;
  }
  e.send(JSON.stringify({ event: a, payload: o }));
}
function T(e, a, o) {
  let s = (n) => {
    let { event: i, payload: l } = JSON.parse(n.data);
    a === i && o(l);
  };
  return e.addEventListener("message", s), () => {
    e.removeEventListener("message", s);
  };
}
var y = import_react.default.createContext({ __devtools: false, port: 5002, url: "localhost", secure: false, ws: null });
var L = ({ __devtools: e, port: a, children: o }) => {
  let [s, n] = import_react.default.useState({ __devtools: e ?? false, port: a ?? 5002, url: "localhost", secure: false, ws: null }), [i, l] = import_react.default.useState(null);
  import_react.default.useEffect(() => {
    let u = new WebSocket(`${s.secure ? "wss" : "ws"}://localhost:${s.port}`), c = T(u, "devtools:handshake", (p) => {
      n((D) => ({ ...D, devtoolsUrl: p.url })), c();
    });
    return u.addEventListener("open", () => {
      s.__devtools || d(u, "devtools:init", { url: window.location.origin });
    }), l(u), () => {
      c(), u.close(1e3, window.location.origin);
    };
  }, []);
  let E = import_react.default.useMemo(() => ({ ...s, ws: i }), [s, i]);
  return import_react.default.createElement(y.Provider, { value: E }, o);
};

export {
  v,
  O,
  d,
  T,
  y,
  L
};
//# sourceMappingURL=chunk-65US5OSJ.js.map
